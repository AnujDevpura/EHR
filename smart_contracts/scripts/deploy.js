const ethers = require("ethers");

async function main() {
    // Replace with your Infura Project ID and private key
    
    const PRIVATE_KEY = "0xbafdaebf810e1931929b0104422c196d4f291367b55689b5d403395e7f485da3";

    // Replace with your contract's ABI and Bytecode
    const ABI =[
      {
        "inputs": [],
        "stateMutability": "nonpayable",
        "type": "constructor"
      },
      {
        "anonymous": false,
        "inputs": [
          {
            "indexed": true,
            "internalType": "address",
            "name": "patient",
            "type": "address"
          },
          {
            "indexed": true,
            "internalType": "address",
            "name": "provider",
            "type": "address"
          }
        ],
        "name": "AccessGranted",
        "type": "event"
      },
      {
        "anonymous": false,
        "inputs": [
          {
            "indexed": true,
            "internalType": "address",
            "name": "requester",
            "type": "address"
          },
          {
            "indexed": true,
            "internalType": "address",
            "name": "patient",
            "type": "address"
          },
          {
            "indexed": false,
            "internalType": "string",
            "name": "reason",
            "type": "string"
          }
        ],
        "name": "AccessRequested",
        "type": "event"
      },
      {
        "anonymous": false,
        "inputs": [
          {
            "indexed": true,
            "internalType": "address",
            "name": "patient",
            "type": "address"
          },
          {
            "indexed": true,
            "internalType": "address",
            "name": "provider",
            "type": "address"
          }
        ],
        "name": "AccessRevoked",
        "type": "event"
      },
      {
        "anonymous": false,
        "inputs": [
          {
            "indexed": true,
            "internalType": "address",
            "name": "patient",
            "type": "address"
          },
          {
            "indexed": false,
            "internalType": "string",
            "name": "cid",
            "type": "string"
          },
          {
            "indexed": false,
            "internalType": "string",
            "name": "recordType",
            "type": "string"
          },
          {
            "indexed": false,
            "internalType": "uint256",
            "name": "timestamp",
            "type": "uint256"
          }
        ],
        "name": "RecordAdded",
        "type": "event"
      },
      {
        "anonymous": false,
        "inputs": [
          {
            "indexed": true,
            "internalType": "address",
            "name": "user",
            "type": "address"
          },
          {
            "indexed": false,
            "internalType": "string",
            "name": "role",
            "type": "string"
          }
        ],
        "name": "UserRegistered",
        "type": "event"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "",
            "type": "address"
          },
          {
            "internalType": "uint256",
            "name": "",
            "type": "uint256"
          }
        ],
        "name": "accessRequests",
        "outputs": [
          {
            "internalType": "address",
            "name": "requester",
            "type": "address"
          },
          {
            "internalType": "string",
            "name": "reason",
            "type": "string"
          },
          {
            "internalType": "uint256",
            "name": "timestamp",
            "type": "uint256"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "string",
            "name": "_cid",
            "type": "string"
          },
          {
            "internalType": "string",
            "name": "_recordType",
            "type": "string"
          }
        ],
        "name": "addRecord",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [],
        "name": "getAllPatients",
        "outputs": [
          {
            "internalType": "address[]",
            "name": "",
            "type": "address[]"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "_patient",
            "type": "address"
          }
        ],
        "name": "getRecords",
        "outputs": [
          {
            "components": [
              {
                "internalType": "string",
                "name": "cid",
                "type": "string"
              },
              {
                "internalType": "string",
                "name": "recordType",
                "type": "string"
              },
              {
                "internalType": "uint256",
                "name": "timestamp",
                "type": "uint256"
              },
              {
                "internalType": "address",
                "name": "uploadedBy",
                "type": "address"
              }
            ],
            "internalType": "struct DecentralizedEHR.Record[]",
            "name": "",
            "type": "tuple[]"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "_provider",
            "type": "address"
          }
        ],
        "name": "grantAccess",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [],
        "name": "owner",
        "outputs": [
          {
            "internalType": "address",
            "name": "",
            "type": "address"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [],
        "name": "registerAsDoctor",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [],
        "name": "registerAsPatient",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "_patient",
            "type": "address"
          },
          {
            "internalType": "string",
            "name": "_reason",
            "type": "string"
          }
        ],
        "name": "requestAccess",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "_provider",
            "type": "address"
          }
        ],
        "name": "revokeAccess",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      }
    ];
    const BYTECODE = "6080604052348015600e575f80fd5b50335f806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506126698061005b5f395ff3fe608060405234801561000f575f80fd5b506004361061009c575f3560e01c806385e685311161006457806385e68531146101325780638da5cb5b1461014e578063a0076e841461016c578063a99ad4ee1461019c578063c9596248146101a65761009c565b80630ae5e739146100a057806318a231a9146100bc5780631e7b3011146100da5780632f6d4a591461010c5780636ba7fe7f14610128575b5f80fd5b6100ba60048036038101906100b5919061155c565b6101c2565b005b6100c46103cc565b6040516100d1919061163e565b60405180910390f35b6100f460048036038101906100ef9190611691565b6104e0565b6040516101039392919061175d565b60405180910390f35b610126600480360381019061012191906118c5565b6105c5565b005b61013061083f565b005b61014c6004803603810190610147919061155c565b610a56565b005b610156610d7d565b604051610163919061191f565b60405180910390f35b6101866004803603810190610181919061155c565b610da0565b6040516101939190611ab1565b60405180910390f35b6101a4611000565b005b6101c060048036038101906101bb9190611ad1565b611217565b005b60035f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff1661024b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161024290611bb7565b60405180910390fd5b60045f8273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff166102d4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102cb90611c45565b60405180910390fd5b60055f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081908060018154018082558091505060019003905f5260205f20015f9091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f9f520b3bfc56d06f7065d10b4683b3f57ac8895d5026cd176dee95ce1454cb8d60405160405180910390a350565b606060045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff16610457576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161044e90611cd3565b60405180910390fd5b60018054806020026020016040519081016040528092919081815260200182805480156104d657602002820191905f5260205f20905b815f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001906001019080831161048d575b5050505050905090565b6007602052815f5260405f2081815481106104f9575f80fd5b905f5260205f2090600302015f9150915050805f015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169080600101805461053e90611d1e565b80601f016020809104026020016040519081016040528092919081815260200182805461056a90611d1e565b80156105b55780601f1061058c576101008083540402835291602001916105b5565b820191905f5260205f20905b81548152906001019060200180831161059857829003601f168201915b5050505050908060020154905083565b60045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff1661064e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161064590611dbe565b60405180910390fd5b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff166106d7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106ce90611e4c565b60405180910390fd5b5f60405180606001604052803373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200142815250905060075f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081908060018154018082558091505060019003905f5260205f2090600302015f909190919091505f820151815f015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010190816107c89190612007565b506040820151816002015550508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f7345df1fefb912154845267ca137457ad1fd510d6426afd2502e66d3006022638460405161083291906120d6565b60405180910390a3505050565b60045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff16156108c9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108c090612140565b60405180910390fd5b60035f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff1615610953576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161094a906121ce565b60405180910390fd5b600233908060018154018082558091505060019003905f5260205f20015f9091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600160045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548160ff0219169083151502179055503373ffffffffffffffffffffffffffffffffffffffff167f48cac28ad4dc618e15f4c2dd5e97751182f166de97b25618318b2112aa951a2f604051610a4c90612236565b60405180910390a2565b60035f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff16610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad6906122c4565b60405180910390fd5b60045f8273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff16610b68576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b5f90611c45565b60405180910390fd5b5f60055f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2090505f5b8180549050811015610d77578273ffffffffffffffffffffffffffffffffffffffff16828281548110610be057610bdf6122e2565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1603610d6a578160018380549050610c35919061233c565b81548110610c4657610c456122e2565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16828281548110610c8157610c806122e2565b5b905f5260205f20015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081805480610cd757610cd661236f565b5b600190038181905f5260205f20015f6101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905590558273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f825c8be24eb0df19500f63e86c29e7d0d951e73056b889b891d85e40938d9b6e60405160405180910390a35050610d7a565b8080600101915050610baa565b50505b50565b5f8054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6060610dac8233611411565b610deb576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610de2906123e6565b60405180910390fd5b60065f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20805480602002602001604051908101604052809291908181526020015f905b82821015610ff5578382905f5260205f2090600402016040518060800160405290815f82018054610e7790611d1e565b80601f0160208091040260200160405190810160405280929190818152602001828054610ea390611d1e565b8015610eee5780601f10610ec557610100808354040283529160200191610eee565b820191905f5260205f20905b815481529060010190602001808311610ed157829003601f168201915b50505050508152602001600182018054610f0790611d1e565b80601f0160208091040260200160405190810160405280929190818152602001828054610f3390611d1e565b8015610f7e5780601f10610f5557610100808354040283529160200191610f7e565b820191905f5260205f20905b815481529060010190602001808311610f6157829003601f168201915b5050505050815260200160028201548152602001600382015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152505081526020019060010190610e47565b505050509050919050565b60035f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff161561108a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110819061244e565b60405180910390fd5b60045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff1615611114576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161110b906124dc565b60405180910390fd5b600133908060018154018082558091505060019003905f5260205f20015f9091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600160035f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548160ff0219169083151502179055503373ffffffffffffffffffffffffffffffffffffffff167f48cac28ad4dc618e15f4c2dd5e97751182f166de97b25618318b2112aa951a2f60405161120d90612544565b60405180910390a2565b60035f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff166112a0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611297906125d2565b60405180910390fd5b5f60405180608001604052808481526020018381526020014281526020013373ffffffffffffffffffffffffffffffffffffffff16815250905060065f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081908060018154018082558091505060019003905f5260205f2090600402015f909190919091505f820151815f0190816113519190612007565b5060208201518160010190816113679190612007565b50604082015181600201556060820151816003015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050503373ffffffffffffffffffffffffffffffffffffffff167fabf956e712eb5b9ee34b39c298c8f13b7e3ab5ac61e12fc5edb7ea72325f2aa3848442604051611404939291906125f0565b60405180910390a2505050565b5f8060055f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2090505f5b81805490508110156114e5578373ffffffffffffffffffffffffffffffffffffffff1682828154811061148a576114896122e2565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16036114d8576001925050506114eb565b8080600101915050611454565b505f9150505b92915050565b5f604051905090565b5f80fd5b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61152b82611502565b9050919050565b61153b81611521565b8114611545575f80fd5b50565b5f8135905061155681611532565b92915050565b5f60208284031215611571576115706114fa565b5b5f61157e84828501611548565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b6115b981611521565b82525050565b5f6115ca83836115b0565b60208301905092915050565b5f602082019050919050565b5f6115ec82611587565b6115f68185611591565b9350611601836115a1565b805f5b8381101561163157815161161888826115bf565b9750611623836115d6565b925050600181019050611604565b5085935050505092915050565b5f6020820190508181035f83015261165681846115e2565b905092915050565b5f819050919050565b6116708161165e565b811461167a575f80fd5b50565b5f8135905061168b81611667565b92915050565b5f80604083850312156116a7576116a66114fa565b5b5f6116b485828601611548565b92505060206116c58582860161167d565b9150509250929050565b6116d881611521565b82525050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f611720826116de565b61172a81856116e8565b935061173a8185602086016116f8565b61174381611706565b840191505092915050565b6117578161165e565b82525050565b5f6060820190506117705f8301866116cf565b81810360208301526117828185611716565b9050611791604083018461174e565b949350505050565b5f80fd5b5f80fd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6117d782611706565b810181811067ffffffffffffffff821117156117f6576117f56117a1565b5b80604052505050565b5f6118086114f1565b905061181482826117ce565b919050565b5f67ffffffffffffffff821115611833576118326117a1565b5b61183c82611706565b9050602081019050919050565b828183375f83830152505050565b5f61186961186484611819565b6117ff565b9050828152602081018484840111156118855761188461179d565b5b611890848285611849565b509392505050565b5f82601f8301126118ac576118ab611799565b5b81356118bc848260208601611857565b91505092915050565b5f80604083850312156118db576118da6114fa565b5b5f6118e885828601611548565b925050602083013567ffffffffffffffff811115611909576119086114fe565b5b61191585828601611898565b9150509250929050565b5f6020820190506119325f8301846116cf565b92915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b5f82825260208201905092915050565b5f61197b826116de565b6119858185611961565b93506119958185602086016116f8565b61199e81611706565b840191505092915050565b6119b28161165e565b82525050565b5f608083015f8301518482035f8601526119d28282611971565b915050602083015184820360208601526119ec8282611971565b9150506040830151611a0160408601826119a9565b506060830151611a1460608601826115b0565b508091505092915050565b5f611a2a83836119b8565b905092915050565b5f602082019050919050565b5f611a4882611938565b611a528185611942565b935083602082028501611a6485611952565b805f5b85811015611a9f5784840389528151611a808582611a1f565b9450611a8b83611a32565b925060208a01995050600181019050611a67565b50829750879550505050505092915050565b5f6020820190508181035f830152611ac98184611a3e565b905092915050565b5f8060408385031215611ae757611ae66114fa565b5b5f83013567ffffffffffffffff811115611b0457611b036114fe565b5b611b1085828601611898565b925050602083013567ffffffffffffffff811115611b3157611b306114fe565b5b611b3d85828601611898565b9150509250929050565b7f4f6e6c7920726567697374657265642070617469656e74732063616e206772615f8201527f6e74206163636573730000000000000000000000000000000000000000000000602082015250565b5f611ba16029836116e8565b9150611bac82611b47565b604082019050919050565b5f6020820190508181035f830152611bce81611b95565b9050919050565b7f546865207461726765742061646472657373206973206e6f74206120726567695f8201527f73746572656420646f63746f7200000000000000000000000000000000000000602082015250565b5f611c2f602d836116e8565b9150611c3a82611bd5565b604082019050919050565b5f6020820190508181035f830152611c5c81611c23565b9050919050565b7f4f6e6c7920646f63746f72732063616e207669657720746865206c697374206f5f8201527f662070617469656e747300000000000000000000000000000000000000000000602082015250565b5f611cbd602a836116e8565b9150611cc882611c63565b604082019050919050565b5f6020820190508181035f830152611cea81611cb1565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680611d3557607f821691505b602082108103611d4857611d47611cf1565b5b50919050565b7f4f6e6c79207265676973746572656420646f63746f72732063616e20726571755f8201527f6573742061636365737300000000000000000000000000000000000000000000602082015250565b5f611da8602a836116e8565b9150611db382611d4e565b604082019050919050565b5f6020820190508181035f830152611dd581611d9c565b9050919050565b7f546865207461726765742061646472657373206973206e6f74206120726567695f8201527f7374657265642070617469656e74000000000000000000000000000000000000602082015250565b5f611e36602e836116e8565b9150611e4182611ddc565b604082019050919050565b5f6020820190508181035f830152611e6381611e2a565b9050919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f60088302611ec67fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82611e8b565b611ed08683611e8b565b95508019841693508086168417925050509392505050565b5f819050919050565b5f611f0b611f06611f018461165e565b611ee8565b61165e565b9050919050565b5f819050919050565b611f2483611ef1565b611f38611f3082611f12565b848454611e97565b825550505050565b5f90565b611f4c611f40565b611f57818484611f1b565b505050565b5b81811015611f7a57611f6f5f82611f44565b600181019050611f5d565b5050565b601f821115611fbf57611f9081611e6a565b611f9984611e7c565b81016020851015611fa8578190505b611fbc611fb485611e7c565b830182611f5c565b50505b505050565b5f82821c905092915050565b5f611fdf5f1984600802611fc4565b1980831691505092915050565b5f611ff78383611fd0565b9150826002028217905092915050565b612010826116de565b67ffffffffffffffff811115612029576120286117a1565b5b6120338254611d1e565b61203e828285611f7e565b5f60209050601f83116001811461206f575f841561205d578287015190505b6120678582611fec565b8655506120ce565b601f19841661207d86611e6a565b5f5b828110156120a45784890151825560018201915060208501945060208101905061207f565b868310156120c157848901516120bd601f891682611fd0565b8355505b6001600288020188555050505b505050505050565b5f6020820190508181035f8301526120ee8184611716565b905092915050565b7f416c72656164792072656769737465726564206173206120646f63746f7200005f82015250565b5f61212a601e836116e8565b9150612135826120f6565b602082019050919050565b5f6020820190508181035f8301526121578161211e565b9050919050565b7f43616e6e6f74207265676973746572206173206120646f63746f7220696620615f8201527f6c726561647920612070617469656e7400000000000000000000000000000000602082015250565b5f6121b86030836116e8565b91506121c38261215e565b604082019050919050565b5f6020820190508181035f8301526121e5816121ac565b9050919050565b7f446f63746f7200000000000000000000000000000000000000000000000000005f82015250565b5f6122206006836116e8565b915061222b826121ec565b602082019050919050565b5f6020820190508181035f83015261224d81612214565b9050919050565b7f4f6e6c7920726567697374657265642070617469656e74732063616e207265765f8201527f6f6b652061636365737300000000000000000000000000000000000000000000602082015250565b5f6122ae602a836116e8565b91506122b982612254565b604082019050919050565b5f6020820190508181035f8301526122db816122a2565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f6123468261165e565b91506123518361165e565b92508282039050818111156123695761236861230f565b5b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603160045260245ffd5b7f4e6f7420617574686f72697a656420746f2076696577207265636f72647300005f82015250565b5f6123d0601e836116e8565b91506123db8261239c565b602082019050919050565b5f6020820190508181035f8301526123fd816123c4565b9050919050565b7f416c7265616479207265676973746572656420617320612070617469656e74005f82015250565b5f612438601f836116e8565b915061244382612404565b602082019050919050565b5f6020820190508181035f8301526124658161242c565b9050919050565b7f43616e6e6f7420726567697374657220617320612070617469656e74206966205f8201527f616c7265616479206120646f63746f7200000000000000000000000000000000602082015250565b5f6124c66030836116e8565b91506124d18261246c565b604082019050919050565b5f6020820190508181035f8301526124f3816124ba565b9050919050565b7f50617469656e74000000000000000000000000000000000000000000000000005f82015250565b5f61252e6007836116e8565b9150612539826124fa565b602082019050919050565b5f6020820190508181035f83015261255b81612522565b9050919050565b7f4f6e6c7920726567697374657265642070617469656e74732063616e206164645f8201527f207265636f726473000000000000000000000000000000000000000000000000602082015250565b5f6125bc6028836116e8565b91506125c782612562565b604082019050919050565b5f6020820190508181035f8301526125e9816125b0565b9050919050565b5f6060820190508181035f8301526126088186611716565b9050818103602083015261261c8185611716565b905061262b604083018461174e565b94935050505056fea2646970667358221220f4b0fe9b0e57b016bc2067d8a49be5b5c2cdcf81445f7c9e603b7fab9028017d64736f6c634300081a0033"; // Replace with contract bytecode

    // Create a provider connected to the Goerli testnet
    const provider = new ethers.providers.JsonRpcProvider(`https://opt-sepolia.g.alchemy.com/v2/xD6U8XVSJ1DEXI2poVpw0ZW2jfb6ZMKu`);

    // Create a wallet connected to the provider
    const wallet = new ethers.Wallet(PRIVATE_KEY, provider);

    // Create a ContractFactory for deploying the contract
    const DecentralizedEHRFactory = new ethers.ContractFactory(ABI, BYTECODE, wallet);

    console.log("Deploying the contract...");

    // Deploy the contract
    const decentralizedEHR = await DecentralizedEHRFactory.deploy();

    // Wait for the contract to be mined
    await decentralizedEHR.deployed();

    console.log("Contract deployed successfully!");
    console.log("Contract address:", decentralizedEHR.address);
}

// Execute the main function
main()
    .then(() => process.exit(0))
    .catch((error) => {
        console.error("Error deploying the contract:", error);
        process.exit(1);
    });
